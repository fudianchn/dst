
local function checka_tallbirdegg(self,a_tallbirdegg) local c = 0 if a_tallbirdegg then c=1 end self.inst.checka_tallbirdegg:set(c) end
local function checka_frogglebunwich(self,a_frogglebunwich) local c = 0 if a_frogglebunwich then c=1 end self.inst.checka_frogglebunwich:set(c) end
local function checka_baconeggs(self,a_baconeggs) local c = 0 if a_baconeggs then c=1 end self.inst.checka_baconeggs:set(c) end
local function checka_bonestew(self,a_bonestew) local c = 0 if a_bonestew then c=1 end self.inst.checka_bonestew:set(c) end
local function checka_fishtacos(self,a_fishtacos) local c = 0 if a_fishtacos then c=1 end self.inst.checka_fishtacos:set(c) end
local function checka_turkeydinner(self,a_turkeydinner) local c = 0 if a_turkeydinner then c=1 end self.inst.checka_turkeydinner:set(c) end
local function checka_fishsticks(self,a_fishsticks) local c = 0 if a_fishsticks then c=1 end self.inst.checka_fishsticks:set(c) end
local function checka_meatballs(self,a_meatballs) local c = 0 if a_meatballs then c=1 end self.inst.checka_meatballs:set(c) end
local function checka_perogies(self,a_perogies) local c = 0 if a_perogies then c=1 end self.inst.checka_perogies:set(c) end
local function checka_bisque(self,a_bisque) local c = 0 if a_bisque then c=1 end self.inst.checka_bisque:set(c) end
local function checka_surfnturf(self,a_surfnturf) local c = 0 if a_surfnturf then c=1 end self.inst.checka_surfnturf:set(c) end
local function checka_tigershark(self,a_tigershark) local c = 0 if a_tigershark then c=1 end self.inst.checka_tigershark:set(c) end
local function checka_twister(self,a_twister) local c = 0 if a_twister then c=1 end self.inst.checka_twister:set(c) end
local function checka_snake(self,a_snake) local c = 0 if a_snake then c=1 end self.inst.checka_snake:set(c) end
local function checka_snake_poison(self,a_snake_poison) local c = 0 if a_snake_poison then c=1 end self.inst.checka_snake_poison:set(c) end
local function checka_crocodog(self,a_crocodog) local c = 0 if a_crocodog then c=1 end self.inst.checka_crocodog:set(c) end
local function checka_poisoncrocodog(self,a_poisoncrocodog) local c = 0 if a_poisoncrocodog then c=1 end self.inst.checka_poisoncrocodog:set(c) end
local function checka_watercrocodog(self,a_watercrocodog) local c = 0 if a_watercrocodog then c=1 end self.inst.checka_watercrocodog:set(c) end
local function checka_coffee(self,a_coffee) local c = 0 if a_coffee then c=1 end self.inst.checka_coffee:set(c) end
local function checka_a1(self,a_a1) local c = 0 if a_a1 then c=1 end self.inst.checka_a1:set(c) end
local function checka_a2(self,a_a2) local c = 0 if a_a2 then c=1 end self.inst.checka_a2:set(c) end
local function checka_a3(self,a_a3) local c = 0 if a_a3 then c=1 end self.inst.checka_a3:set(c) end
local function checka_a4(self,a_a4) local c = 0 if a_a4 then c=1 end self.inst.checka_a4:set(c) end
local function checka_a5(self,a_a5) local c = 0 if a_a5 then c=1 end self.inst.checka_a5:set(c) end
local function checka_a6(self,a_a6) local c = 0 if a_a6 then c=1 end self.inst.checka_a6:set(c) end
local function checka_a7(self,a_a7) local c = 0 if a_a7 then c=1 end self.inst.checka_a7:set(c) end
local function checka_a8(self,a_a8) local c = 0 if a_a8 then c=1 end self.inst.checka_a8:set(c) end
local function checka_a9(self,a_a9) local c = 0 if a_a9 then c=1 end self.inst.checka_a9:set(c) end
local function checka_a10(self,a_a10) local c = 0 if a_a10 then c=1 end self.inst.checka_a10:set(c) end





local function currenta_tallbirdeggamount(self,a_tallbirdeggamount) self.inst.currenta_tallbirdeggamount:set(a_tallbirdeggamount) end
local function currenta_frogglebunwichamount(self,a_frogglebunwichamount) self.inst.currenta_frogglebunwichamount:set(a_frogglebunwichamount) end
local function currenta_baconeggsamount(self,a_baconeggsamount) self.inst.currenta_baconeggsamount:set(a_baconeggsamount) end
local function currenta_bonestewamount(self,a_bonestewamount) self.inst.currenta_bonestewamount:set(a_bonestewamount) end
local function currenta_fishtacosamount(self,a_fishtacosamount) self.inst.currenta_fishtacosamount:set(a_fishtacosamount) end
local function currenta_turkeydinneramount(self,a_turkeydinneramount) self.inst.currenta_turkeydinneramount:set(a_turkeydinneramount) end
local function currenta_fishsticksamount(self,a_fishsticksamount) self.inst.currenta_fishsticksamount:set(a_fishsticksamount) end
local function currenta_meatballsamount(self,a_meatballsamount) self.inst.currenta_meatballsamount:set(a_meatballsamount) end
local function currenta_perogiesamount(self,a_perogiesamount) self.inst.currenta_perogiesamount:set(a_perogiesamount) end
local function currenta_bisqueamount(self,a_bisqueamount) self.inst.currenta_bisqueamount:set(a_bisqueamount) end
local function currenta_surfnturfamount(self,a_surfnturfamount) self.inst.currenta_surfnturfamount:set(a_surfnturfamount) end
local function currenta_tigersharkamount(self,a_tigersharkamount) self.inst.currenta_tigersharkamount:set(a_tigersharkamount) end
local function currenta_twisteramount(self,a_twisteramount) self.inst.currenta_twisteramount:set(a_twisteramount) end
local function currenta_snakeamount(self,a_snakeamount) self.inst.currenta_snakeamount:set(a_snakeamount) end
local function currenta_snake_poisonamount(self,a_snake_poisonamount) self.inst.currenta_snake_poisonamount:set(a_snake_poisonamount) end
local function currenta_crocodogamount(self,a_crocodogamount) self.inst.currenta_crocodogamount:set(a_crocodogamount) end
local function currenta_poisoncrocodogamount(self,a_poisoncrocodogamount) self.inst.currenta_poisoncrocodogamount:set(a_poisoncrocodogamount) end
local function currenta_watercrocodogamount(self,a_watercrocodogamount) self.inst.currenta_watercrocodogamount:set(a_watercrocodogamount) end
local function currenta_coffeeamount(self,a_coffeeamount) self.inst.currenta_coffeeamount:set(a_coffeeamount) end
local function currenta_a1amount(self,a_a1amount) self.inst.currenta_a1amount:set(a_a1amount) end
local function currenta_a2amount(self,a_a2amount) self.inst.currenta_a2amount:set(a_a2amount) end
local function currenta_a3amount(self,a_a3amount) self.inst.currenta_a3amount:set(a_a3amount) end
local function currenta_a4amount(self,a_a4amount) self.inst.currenta_a4amount:set(a_a4amount) end
local function currenta_a5amount(self,a_a5amount) self.inst.currenta_a5amount:set(a_a5amount) end
local function currenta_a6amount(self,a_a6amount) self.inst.currenta_a6amount:set(a_a6amount) end
local function currenta_a7amount(self,a_a7amount) self.inst.currenta_a7amount:set(a_a7amount) end
local function currenta_a8amount(self,a_a8amount) self.inst.currenta_a8amount:set(a_a8amount) end
local function currenta_a9amount(self,a_a9amount) self.inst.currenta_a9amount:set(a_a9amount) end
local function currenta_a10amount(self,a_a10amount) self.inst.currenta_a10amount:set(a_a10amount) end

--====================================================================================================================

local allachivevent_c = Class(function(self, inst)
    self.inst = inst


    self.a_tallbirdegg = false
    self.a_frogglebunwich = false
    self.a_baconeggs = false
    self.a_bonestew = false
    self.a_fishtacos = false
    self.a_turkeydinner = false
    self.a_fishsticks = false
    self.a_meatballs = false
    self.a_perogies = false
    self.a_bisque = false
    self.a_surfnturf = false
    self.a_tigershark = false
    self.a_twister = false
    self.a_snake = false
    self.a_snake_poison = false
    self.a_crocodog = false
    self.a_poisoncrocodog = false
    self.a_watercrocodog = false
    self.a_coffee = false
    self.a_a1 = false
    self.a_a2 = false
    self.a_a3 = false
    self.a_a4 = false
    self.a_a5 = false
    self.a_a6 = false
    self.a_a7 = false
    self.a_a8 = false
    self.a_a9 = false
    self.a_a10 = false



--======================================



    self.a_tallbirdeggamount = 0
    self.a_frogglebunwichamount = 0
    self.a_baconeggsamount = 0
    self.a_bonestewamount = 0
    self.a_fishtacosamount = 0
    self.a_turkeydinneramount = 0
    self.a_fishsticksamount = 0
    self.a_meatballsamount = 0
    self.a_perogiesamount = 0
    self.a_bisqueamount = 0
    self.a_surfnturfamount = 0
    self.a_tigersharkamount = 0
    self.a_twisteramount = 0
    self.a_snakeamount = 0
    self.a_snake_poisonamount = 0
    self.a_crocodogamount = 0
    self.a_poisoncrocodogamount = 0
    self.a_watercrocodogamount = 0
    self.a_coffeeamount = 0
    self.a_a1amount = 0
    self.a_a2amount = 0
    self.a_a3amount = 1000
    self.a_a4amount = 0
    self.a_a5amount = 0
    self.a_a6amount = 0
    self.a_a7amount = 0
    self.a_a8amount = 0
    self.a_a9amount = 0
    self.a_a10amount = 0


end,
nil,
{
 
    a_tallbirdegg = checka_tallbirdegg,
    a_frogglebunwich = checka_frogglebunwich,
    a_baconeggs = checka_baconeggs,
    a_bonestew = checka_bonestew,
    a_fishtacos = checka_fishtacos,
    a_turkeydinner = checka_turkeydinner,
    a_fishsticks = checka_fishsticks,
    a_meatballs = checka_meatballs,
    a_perogies = checka_perogies,
    a_bisque = checka_bisque,
    a_surfnturf = checka_surfnturf,
    a_tigershark = checka_tigershark,
    a_twister = checka_twister,
    a_snake = checka_snake,
    a_snake_poison = checka_snake_poison,
    a_crocodog = checka_crocodog,
    a_poisoncrocodog = checka_poisoncrocodog,
    a_watercrocodog = checka_watercrocodog,
    a_coffee = checka_coffee,
    a_a1 = checka_a1,
    a_a2 = checka_a2,
    a_a3 = checka_a3,
    a_a4 = checka_a4,
    a_a5 = checka_a5,
    a_a6 = checka_a6,
    a_a7 = checka_a7,
    a_a8 = checka_a8,
    a_a9 = checka_a9,
    a_a10 = checka_a10,






--================================================


 


    a_tallbirdeggamount = currenta_tallbirdeggamount,
    a_frogglebunwichamount = currenta_frogglebunwichamount,
    a_baconeggsamount = currenta_baconeggsamount,
    a_bonestewamount = currenta_bonestewamount,
    a_fishtacosamount = currenta_fishtacosamount,
    a_turkeydinneramount = currenta_turkeydinneramount,
    a_fishsticksamount = currenta_fishsticksamount,
    a_meatballsamount = currenta_meatballsamount,
    a_perogiesamount = currenta_perogiesamount,
    a_bisqueamount = currenta_bisqueamount,
    a_surfnturfamount = currenta_surfnturfamount,
    a_tigersharkamount = currenta_tigersharkamount,
    a_twisteramount = currenta_twisteramount,
    a_snakeamount = currenta_snakeamount,
    a_snake_poisonamount = currenta_snake_poisonamount,
    a_crocodogamount = currenta_crocodogamount,
    a_poisoncrocodogamount = currenta_poisoncrocodogamount,
    a_watercrocodogamount = currenta_watercrocodogamount,
    a_coffeeamount = currenta_coffeeamount,
    a_a1amount = currenta_a1amount,
    a_a2amount = currenta_a2amount,
    a_a3amount = currenta_a3amount,
    a_a4amount = currenta_a4amount,
    a_a5amount = currenta_a5amount,
    a_a6amount = currenta_a6amount,
    a_a7amount = currenta_a7amount,
    a_a8amount = currenta_a8amount,
    a_a9amount = currenta_a9amount,
    a_a10amount = currenta_a10amount,

})

--保存
function allachivevent_c:OnSave()
    local data = {

 
        a_tallbirdegg = self.a_tallbirdegg,
        a_frogglebunwich = self.a_frogglebunwich,
        a_baconeggs = self.a_baconeggs,
        a_bonestew = self.a_bonestew,
        a_fishtacos = self.a_fishtacos,
        a_turkeydinner = self.a_turkeydinner,
        a_fishsticks = self.a_fishsticks,
        a_meatballs = self.a_meatballs,
        a_perogies = self.a_perogies,
        a_bisque = self.a_bisque,
        a_surfnturf = self.a_surfnturf,
        a_tigershark = self.a_tigershark,
        a_twister = self.a_twister,
        a_snake = self.a_snake,
        a_snake_poison = self.a_snake_poison,
        a_crocodog = self.a_crocodog,
        a_poisoncrocodog = self.a_poisoncrocodog,
        a_watercrocodog = self.a_watercrocodog,
        a_coffee = self.a_coffee,
        a_a1 = self.a_a1,
        a_a2 = self.a_a2,
        a_a3 = self.a_a3,
        a_a4 = self.a_a4,
        a_a5 = self.a_a5,
        a_a6 = self.a_a6,
        a_a7 = self.a_a7,
        a_a8 = self.a_a8,
        a_a9 = self.a_a9,
        a_a10 = self.a_a10,



        a_tallbirdeggamount = self.a_tallbirdeggamount,
        a_frogglebunwichamount = self.a_frogglebunwichamount,
        a_baconeggsamount = self.a_baconeggsamount,
        a_bonestewamount = self.a_bonestewamount,
        a_fishtacosamount = self.a_fishtacosamount,
        a_turkeydinneramount = self.a_turkeydinneramount,
        a_fishsticksamount = self.a_fishsticksamount,
        a_meatballsamount = self.a_meatballsamount,
        a_perogiesamount = self.a_perogiesamount,
        a_bisqueamount = self.a_bisqueamount,
        a_surfnturfamount = self.a_surfnturfamount,
        a_tigersharkamount = self.a_tigersharkamount,
        a_twisteramount = self.a_twisteramount,
        a_snakeamount = self.a_snakeamount,
        a_snake_poisonamount = self.a_snake_poisonamount,
        a_crocodogamount = self.a_crocodogamount,
        a_poisoncrocodogamount = self.a_poisoncrocodogamount,
        a_watercrocodogamount = self.a_watercrocodogamount,
        a_coffeeamount = self.a_coffeeamount,
        a_a1amount = self.a_a1amount,
        a_a2amount = self.a_a2amount,
        a_a3amount = self.a_a3amount,
        a_a4amount = self.a_a4amount,
        a_a5amount = self.a_a5amount,
        a_a6amount = self.a_a6amount,
        a_a7amount = self.a_a7amount,
        a_a8amount = self.a_a8amount,
        a_a9amount = self.a_a9amount,
        a_a10amount = self.a_a10amount,


    }
    return data
end

--载入
function allachivevent_c:OnLoad(data)

    self.a_tallbirdegg = data.a_tallbirdegg or false
    self.a_frogglebunwich = data.a_frogglebunwich or false
    self.a_baconeggs = data.a_baconeggs or false
    self.a_bonestew = data.a_bonestew or false
    self.a_fishtacos = data.a_fishtacos or false
    self.a_turkeydinner = data.a_turkeydinner or false
    self.a_fishsticks = data.a_fishsticks or false
    self.a_meatballs = data.a_meatballs or false
    self.a_perogies = data.a_perogies or false
    self.a_bisque = data.a_bisque or false
    self.a_surfnturf = data.a_surfnturf or false
    self.a_tigershark = data.a_tigershark or false
    self.a_twister = data.a_twister or false
    self.a_snake = data.a_snake or false
    self.a_snake_poison = data.a_snake_poison or false
    self.a_crocodog = data.a_crocodog or false
    self.a_poisoncrocodog = data.a_poisoncrocodog or false
    self.a_watercrocodog = data.a_watercrocodog or false
    self.a_coffee = data.a_coffee or false
    self.a_a1 = data.a_a1 or false
    self.a_a2 = data.a_a2 or false
    self.a_a3 = data.a_a3 or false
    self.a_a4 = data.a_a4 or false
    self.a_a5 = data.a_a5 or false
    self.a_a6 = data.a_a6 or false
    self.a_a7 = data.a_a7 or false
    self.a_a8 = data.a_a8 or false
    self.a_a9 = data.a_a9 or false
    self.a_a10 = data.a_a10 or false



    self.a_tallbirdeggamount = data.a_tallbirdeggamount or 0
    self.a_frogglebunwichamount = data.a_frogglebunwichamount or 0
    self.a_baconeggsamount = data.a_baconeggsamount or 0
    self.a_bonestewamount = data.a_bonestewamount or 0
    self.a_fishtacosamount = data.a_fishtacosamount or 0
    self.a_turkeydinneramount = data.a_turkeydinneramount or 0
    self.a_fishsticksamount = data.a_fishsticksamount or 0
    self.a_meatballsamount = data.a_meatballsamount or 0
    self.a_perogiesamount = data.a_perogiesamount or 0
    self.a_bisqueamount = data.a_bisqueamount or 0
    self.a_surfnturfamount = data.a_surfnturfamount or 0
    self.a_tigersharkamount = data.a_tigersharkamount or 0
    self.a_twisteramount = data.a_twisteramount or 0
    self.a_snakeamount = data.a_snakeamount or 0
    self.a_snake_poisonamount = data.a_snake_poisonamount or 0
    self.a_crocodogamount = data.a_crocodogamount or 0
    self.a_poisoncrocodogamount = data.a_poisoncrocodogamount or 0
    self.a_watercrocodogamount = data.a_watercrocodogamount or 0
    self.a_coffeeamount = data.a_coffeeamount or 0
    self.a_a1amount = data.a_a1amount or 0        --判断是否有DSS in DST
    self.a_a2amount = data.a_a2amount or 0        --当前经验值
    self.a_a3amount = data.a_a3amount or 1000     --升级所需经验
    self.a_a4amount = data.a_a4amount or 0        --等级
    self.a_a5amount = data.a_a5amount or 0        --
    self.a_a6amount = data.a_a6amount or 0
    self.a_a7amount = data.a_a7amount or 0
    self.a_a8amount = data.a_a8amount or 0
    self.a_a9amount = data.a_a9amount or 0
    self.a_a10amount = data.a_a10amount or 0

end

--给与经验豆
local function  givegift(inst)

    local itemexp = SpawnPrefab("giftwrap_blueprint")
    inst.components.inventory:GiveItem(itemexp, nil, inst:GetPosition())
    
end

--给与经验豆
local function  giveexpbean1(inst)
    local rand1 = math.random()
    if rand1 <= 0.15 then
        local itemexp = SpawnPrefab("expbean")
        inst.components.inventory:GiveItem(itemexp, nil, inst:GetPosition())
    end
end
local function  giveexpbean2(inst)
    local rand2 = math.random()
    if rand2 > 0.15 and rand2 <= 0.5 then
        local itemexp = SpawnPrefab("expbean")
        inst.components.inventory:GiveItem(itemexp, nil, inst:GetPosition())
    end
    if rand2 <= 0.15 then
        giveexpbean1(inst)
    end
end
local function  giveexpbean3(inst)
    local rand3 = math.random()
    if rand3 > 0.25 then
        local itemexp = SpawnPrefab("expbean")
        inst.components.inventory:GiveItem(itemexp, nil, inst:GetPosition())
    end
    if rand3 <= 0.25 then
        giveexpbean1(inst)
    end
end
--通用效果器
function allachivevent_c:seffc(inst, tag)
    SpawnPrefab("seffc").entity:SetParent(inst.entity)
    local str0 = STRINGS.ALLACHIVCURRENCY
    local strname = STRINGS.ALLACHIVNAME
    local strinfo = STRINGS.ALLACHIVINFO
    local strcoin = STRINGS.ALLACHIVCOIN
    if tag == "intogame" and self.all == true then
        TheNet:Announce(inst:GetDisplayName().."   "..strinfo["intogameafterall"]..str0[3]..str0[1]..strname[tag]..str0[2])
    elseif tag == "black" and self.blacktile == "spat" then
        TheNet:Announce(inst:GetDisplayName().."   "..strinfo["blackspat"]..str0[3]..str0[1]..strname[tag]..str0[2])
    else
        TheNet:Announce(inst:GetDisplayName().."   "..strinfo[tag]..str0[3]..str0[1]..strname[tag]..str0[2])
    end
    inst.components.talker:Say(str0[6]..strname[tag]..str0[2].."\n"..str0[4]..allachiv_coinget[tag]..str0[5])
    inst.components.allachivcoin:coinDoDelta(allachiv_coinget[tag])
end

--=========升级=======================


--====================================

--吃东西
function allachivevent_c:eatfn(inst)
    inst:DoTaskInTime(1, function()
        local oldeatfn = inst.components.eater.oneatfn
        function inst.components.eater.oneatfn(inst, food)

            --======================================================

            if inst.components.allachivcoin.level == true  then
                --100exp
                if  food.prefab == "butterflymuffin" or
                    food.prefab == "frogglebunwich" or
                    food.prefab == "honeyham" or
                    food.prefab == "dragonpie" or
                    food.prefab == "taffy" or
                    food.prefab == "pumpkincookie" or
                    food.prefab == "kabobs" or
                    food.prefab == "baconeggs" or
                    food.prefab == "bonestew" or
                    food.prefab == "perogies" or
                    food.prefab == "fruitmedley" or
                    food.prefab == "fishtacos" or
                    food.prefab == "waffles" or
                    food.prefab == "turkeydinner" or
                    food.prefab == "fishsticks" or
                    food.prefab == "stuffedeggplant" or
                    food.prefab == "honeynuggets" or
                    food.prefab == "jammypreserves" or
                    food.prefab == "monsterlasagna" or
                    food.prefab == "unagi" or
                    food.prefab == "flowersalad" or
                    food.prefab == "icecream" or
                    food.prefab == "watermelonicle" or
                    food.prefab == "trailmix" or
                    food.prefab == "hotchili" or
                    food.prefab == "guacamole" or


                    --dss IN DST
                    food.prefab == "freshfruitcrepes" or
                    food.prefab == "pancakefruit" or
                    food.prefab == "bisque" or
                    food.prefab == "coffeeham" or
                    food.prefab == "surfnturf" or
                    food.prefab == "bananapop" or
                    food.prefab == "coffee" or
                    food.prefab == "californiaroll" or
                    food.prefab == "cave_chocolate" or
                    food.prefab == "caviar" or
                     
                    food.prefab == "bs_food_04" or
                    food.prefab == "bs_food_22" or

                    food.prefab == "meatballs" 
                    then
                    self.a_a2amount = self.a_a2amount + 100
                    inst.components.talker:Say("Lv"..self.a_a4amount.."   "..self.a_a2amount.."/"..self.a_a3amount.."")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                elseif  food.prefab == "gears"  or  --500exp
                    food.prefab == "deerclops_eyeball" or
                    food.prefab == "minotaurhorn" or
                    food.prefab == "trunk_summer" or
                    food.prefab == "trunk_winter" or
                    food.prefab == "glommerfuel" or
                    food.prefab == "mandrake" or
                    food.prefab == "cookedmandrake" or
                    food.prefab == "mandrakesoup" or
                    food.prefab == "lobsterdinner" or
                    
                    food.prefab == "trunk_cooked"
                    then         
                    self.a_a2amount = self.a_a2amount + 500
                    inst.components.talker:Say("Lv"..self.a_a4amount.."  exp+500")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                elseif  food.prefab == "bs_food_33"  or  --250exp
                   -- food.prefab == "bs_food_04" or
                    food.prefab == "bs_food_34" or
                    food.prefab == "bs_food_40" or
                    food.prefab == "bs_food_53" or
                    food.prefab == "bs_food_56" or
                    food.prefab == "bs_food_67" or
                    food.prefab == "bs_food_69" or

                    --food.prefab == "bs_food_22" or
                    food.prefab == "bs_food_27" or
                    food.prefab == "bs_food_36" or
                    food.prefab == "bs_food_38" or
                    food.prefab == "bs_food_47" or
                    food.prefab == "bs_food_52" or
                    food.prefab == "bs_food_55" or
                    food.prefab == "bs_food_57" or
                    food.prefab == "bs_food_58" or
                    food.prefab == "bs_food_64"
                    then         
                    self.a_a2amount = self.a_a2amount + 200
                    inst.components.talker:Say("Lv"..self.a_a4amount.."  exp+200")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                elseif  food.prefab == "expbean"    --2000exp  
                    then         
                    self.a_a2amount = self.a_a2amount + 2000
                    inst.components.talker:Say("Lv"..self.a_a4amount.."  exp+2000")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                else  --5exp
                    self.a_a2amount = self.a_a2amount + 5
                    inst.components.talker:Say("Lv"..self.a_a4amount.."   "..self.a_a2amount.."/"..self.a_a3amount.."")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                end

            end
            --======================================================

            --吃掉100个蜜汁火腿
            if self.a_a5 ~= true and food.prefab == "honeyham"  then
                self.a_a5amount = self.a_a5amount + 1
                if self.a_a5amount >= allachiv_eventdata["a_a5"] then
                    self.a_a5 = true
                    self:seffc(inst, "a_a5")
                end
            end











            --吃掉6个高脚鸟蛋
            if self.a_tallbirdegg ~= true and food.prefab == "tallbirdegg"  then
                self.a_tallbirdeggamount = self.a_tallbirdeggamount + 1
                if self.a_tallbirdeggamount >= allachiv_eventdata["a_tallbirdegg"] then
                    self.a_tallbirdegg = true
                    self:seffc(inst, "a_tallbirdegg")
                end
            end




            --吃掉6个高脚鸟蛋
            if self.a_tallbirdegg ~= true and food.prefab == "tallbirdegg_cooked"  then
                self.a_tallbirdeggamount = self.a_tallbirdeggamount + 1
                if self.a_tallbirdeggamount >= allachiv_eventdata["a_tallbirdegg"] then
                    self.a_tallbirdegg = true
                    self:seffc(inst, "a_tallbirdegg")
                end
            end
            --吃掉30个青蛙三明治
            if self.a_frogglebunwich ~= true and food.prefab == "frogglebunwich"  then
                self.a_frogglebunwichamount = self.a_frogglebunwichamount + 1
                if self.a_frogglebunwichamount >= allachiv_eventdata["a_frogglebunwich"] then
                    self.a_frogglebunwich = true
                    self:seffc(inst, "a_frogglebunwich")
                end
            end
            --吃掉30个鸡蛋火腿
            if  food.prefab == "baconeggs"  then
                if self.a_baconeggs ~= true then
                    self.a_baconeggsamount = self.a_baconeggsamount + 1
                    if self.a_baconeggsamount >= allachiv_eventdata["a_baconeggs"] then
                        self.a_baconeggs = true
                        self:seffc(inst, "a_baconeggs")
                    end
                end
                if self.a_bisque ~= true then
                    self.a_bisqueamount = 0
                end
                if self.a_surfnturf ~= true then
                    self.a_surfnturfamount = 0
                end
            end
            --吃掉30个肉汤
            if self.a_bonestew ~= true and food.prefab == "bonestew"  then
                self.a_bonestewamount = self.a_bonestewamount + 1
                if self.a_bonestewamount >= allachiv_eventdata["a_bonestew"] then
                    self.a_bonestew = true
                    self:seffc(inst, "a_bonestew")
                end
            end
            --吃掉30个鱼炸玉米饼
            if self.a_fishtacos ~= true and food.prefab == "fishtacos"  then
                self.a_fishtacosamount = self.a_fishtacosamount + 1
                if self.a_fishtacosamount >= allachiv_eventdata["a_fishtacos"] then
                    self.a_fishtacos = true
                    self:seffc(inst, "a_fishtacos")
                end
            end
            --吃掉30个火鸡正餐
            if self.a_turkeydinner ~= true and food.prefab == "turkeydinner"  then
                self.a_turkeydinneramount = self.a_turkeydinneramount + 1
                if self.a_turkeydinneramount >= allachiv_eventdata["a_turkeydinner"] then
                    self.a_turkeydinner = true
                    self:seffc(inst, "a_turkeydinner")
                end
            end
            --吃掉30个炸鱼条
            if self.a_fishsticks ~= true and food.prefab == "fishsticks"  then
                self.a_fishsticksamount = self.a_fishsticksamount + 1
                if self.a_fishsticksamount >= allachiv_eventdata["a_fishsticks"] then
                    self.a_fishsticks = true
                    self:seffc(inst, "a_fishsticks")
                end
            end
            --吃掉60个肉丸
            if  food.prefab == "meatballs"  then
                if self.a_meatballs ~= true then
                    self.a_meatballsamount = self.a_meatballsamount + 1
                    if self.a_meatballsamount >= allachiv_eventdata["a_meatballs"] then
                        self.a_meatballs = true
                        self:seffc(inst, "a_meatballs")
                    end
                end
                if self.a_bisque ~= true then
                    self.a_bisqueamount = 0
                end
                if self.a_surfnturf ~= true then
                    self.a_surfnturfamount = 0
                end
            end
            --吃掉150个饺子
            if food.prefab == "perogies"  then
               if self.a_perogies ~= true then 
                    self.a_perogiesamount = self.a_perogiesamount + 1
                    if self.a_perogiesamount >= allachiv_eventdata["a_perogies"] then
                        self.a_perogies = true
                        self:seffc(inst, "a_perogies")
                    end
                end
                if self.a_bisque ~= true then
                    self.a_bisqueamount = 0
                end
                if self.a_surfnturf ~= true then
                    self.a_surfnturfamount = 0
                end
            end
            --吃掉11辣椒酱
            if self.a_bisque ~= true and food.prefab == "hotchili"  then
                self.a_bisqueamount = self.a_bisqueamount + 1
                self.a_bisque = true
                self.a_surfnturf = false
                if self.a_bisqueamount >= allachiv_eventdata["a_bisque"] and self.a_surfnturfamount >= allachiv_eventdata["a_surfnturf"]  then
                    self.a_bisque = true
                    self.a_surfnturf = true
                    givegift(inst)
                end
            end
            --吃掉11鳄梨酱
            if self.a_surfnturf ~= true and food.prefab == "guacamole"  then
                self.a_surfnturfamount = self.a_surfnturfamount + 1
                self.a_surfnturf = true
                self.a_bisque = false

                if self.a_surfnturfamount >= allachiv_eventdata["a_surfnturf"] and self.a_bisqueamount >= allachiv_eventdata["a_bisque"]  then
                    self.a_surfnturf = true
                    self.a_bisque = true
                    givegift(inst)
                end
            end
            --消耗200个咖啡
            if self.a_coffee ~= true  and food.prefab == "coffee" then
                self.a_coffeeamount = self.a_coffeeamount + 1
                if self.a_coffeeamount >= allachiv_eventdata["a_coffee"] then
                    self.a_coffee = true
                    self:seffc(inst, "a_coffee")
                end
            end
            if oldeatfn ~= nil then
                oldeatfn(inst, food)
            end
        end
    end)
end



--击杀单位
function allachivevent_c:onkilledother(inst)
    inst:ListenForEvent("killed", function(inst, data)
        local victim = data.victim

        --击杀5个骑士
        if victim and (victim.prefab == "knight" or victim.prefab == "knight_nightmare") and self.a_a6 ~= true then
            self.a_a6amount = self.a_a6amount + 1
            if self.a_a6amount >= allachiv_eventdata["a_a6"] then
                self.a_a6 = true
                self:seffc(inst, "a_a6")
            end
        end
        --击杀5个主教
        if victim and (victim.prefab == "bishop" or victim.prefab == "bishop_nightmare")  and self.a_a7 ~= true then
            self.a_a7amount = self.a_a7amount + 1
            if self.a_a7amount >= allachiv_eventdata["a_a7"] then
                self.a_a7 = true
                self:seffc(inst, "a_a7")
            end
        end
        --击杀5个战车
        if victim and (victim.prefab == "rook" or victim.prefab == "rook_nightmare")  and self.a_a8 ~= true then
            self.a_a8amount = self.a_a8amount + 1
            if self.a_a8amount >= allachiv_eventdata["a_a8"] then
                self.a_a8 = true
                self:seffc(inst, "a_a8")
            end
        end














        --击杀88条红蛇
        if victim and victim.prefab == "snake" and self.a_snake ~= true then
            self.a_snakeamount = self.a_snakeamount + 1
            if self.a_snakeamount >= allachiv_eventdata["a_snake"] then
                self.a_snake = true
                self:seffc(inst, "a_snake")
            end
        end
        --击杀55条毒蛇
        if victim and victim.prefab == "snake_poison" and self.a_snake_poison ~= true then
            self.a_snake_poisonamount = self.a_snake_poisonamount + 1
            if self.a_snake_poisonamount >= allachiv_eventdata["a_snake_poison"] then
                self.a_snake_poison = true
                self:seffc(inst, "a_snake_poison")
            end
        end
        --击杀250只普通鳄狗
        if victim and victim.prefab == "crocodog" and self.a_crocodog ~= true then
            self.a_crocodogamount = self.a_crocodogamount + 1
            if self.a_crocodogamount >= allachiv_eventdata["a_crocodog"] then
                self.a_crocodog = true
                self:seffc(inst, "a_crocodog")
            end
        end
        --击杀100只毒鳄狗
        if victim and victim.prefab == "poisoncrocodog" and self.a_poisoncrocodog ~= true then
            self.a_poisoncrocodogamount = self.a_poisoncrocodogamount + 1
            if self.a_poisoncrocodogamount >= allachiv_eventdata["a_poisoncrocodog"] then
                self.a_poisoncrocodog = true
                self:seffc(inst, "a_poisoncrocodog")
            end
        end
        --击杀100只水鳄狗
        if victim and victim.prefab == "watercrocodog" and self.a_watercrocodog ~= true then
            self.a_watercrocodogamount = self.a_watercrocodogamount + 1
            if self.a_watercrocodogamount >= allachiv_eventdata["a_watercrocodog"] then
                self.a_watercrocodog = true
                self:seffc(inst, "a_watercrocodog")
            end
        end




 
        --击杀虎鲨
        if victim and victim.prefab == "tigershark" and self.a_tigershark ~= true then
            self.a_tigershark = true
            self:seffc(inst, "a_tigershark")
        end
        --击杀豹卷风
        if victim and victim.prefab == "twister" and self.a_twister ~= true then
            self.a_twister = true
            self:seffc(inst, "a_twister")
        end

        if inst.components.allachivcoin.level == true  then
                --100exp
                if victim and victim.components.health and victim.components.health.maxhealth <= 800 then
                     
                   
                    self.a_a2amount = self.a_a2amount + 30
                    inst.components.talker:Say("exp +30")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                elseif victim and victim.components.health and victim.components.health.maxhealth >800 and victim.components.health.maxhealth <= 1800 then--500exp        
                    self.a_a2amount = self.a_a2amount + 300
                    inst.components.talker:Say("exp +300")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                elseif victim and ( victim.prefab == "twister"  or
                	 victim.prefab == "tigershark" or
                	 victim.prefab == "beequeen" or 
                	 victim.prefab == "toadstool" or 
                	 victim.prefab == "toadstool_dark" or 
                	 victim.prefab == "antlion" or 
                	 victim.prefab == "minotaur" or 
                	 victim.prefab == "deerclops" or 
                	 victim.prefab == "moose" or 
                	 victim.prefab == "dragonfly" or 
                	 victim.prefab == "bearger" or 
                	 victim.prefab == "stalker_atrium" or 
                	 victim.prefab == "leif" or 
                	-- victim.prefab == "tigershark" or 
                	-- victim.prefab == "tigershark" or 
                	-- victim.prefab == "tigershark" or  
                	-- victim.prefab == "tigershark" or 
                	-- victim.prefab == "tigershark" or 
                	 victim.prefab == "leif_sparse" ) then
                   		self.a_a2amount = self.a_a2amount + 3000
                    	inst.components.talker:Say("exp +3000")
                    	if self.a_a2amount >= self.a_a3amount then
                        	self.a_a2amount = self.a_a2amount - self.a_a3amount
                        	self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        	self.a_a4amount = self.a_a4amount + 1    --等级 
                        	inst.components.talker:Say("升级了")
                        	if self.a_a4amount <= 220 then
                            	self:seffc(inst, "a_a4")
                        	end
                    	end
                elseif victim and victim.prefab == "klaus" and victim.components.health and victim.components.health.currenthealth==0 then
                    self.a_a2amount = self.a_a2amount + 1200
                    inst.components.talker:Say("exp +1200")
                    if self.a_a2amount >= self.a_a3amount then
                        self.a_a2amount = self.a_a2amount - self.a_a3amount
                        self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        self.a_a4amount = self.a_a4amount + 1    --等级 
                        inst.components.talker:Say("升级了")
                        if self.a_a4amount <= 220 then
                            self:seffc(inst, "a_a4")
                        end
                    end
                    giveexpbean3(inst)
                else
                	self.a_a2amount = self.a_a2amount + 5
                    	inst.components.talker:Say("exp +5")
                    	if self.a_a2amount >= self.a_a3amount then
                        	self.a_a2amount = self.a_a2amount - self.a_a3amount
                        	self.a_a3amount = self.a_a3amount  + 100    --升级需要de经验
                        	self.a_a4amount = self.a_a4amount + 1    --等级 
                        	inst.components.talker:Say("升级了")
                        	if self.a_a4amount <= 220 then
                            	self:seffc(inst, "a_a4")
                        	end
                    	end
                    
                end

                --经验豆 giveexpbean1(inst)   giveexpbean2(inst)  giveexpbean3(inst)
                if victim and ( victim.prefab == "twister"  or
                     victim.prefab == "tigershark" or
                     victim.prefab == "beequeen" or 
                     victim.prefab == "toadstool" or 
                     victim.prefab == "toadstool_dark" or 
                     victim.prefab == "antlion" or 
                     victim.prefab == "minotaur" or 
                     victim.prefab == "deerclops" or 
                     victim.prefab == "moose" or 
                     victim.prefab == "dragonfly" or 
                     victim.prefab == "bearger" or 
                     victim.prefab == "stalker_atrium" )
                     then
                     giveexpbean3(inst)
                end
                if victim and ( victim.prefab == "spiderqueen"  or
                     victim.prefab == "leif" or
                     victim.prefab == "leif_sparse" or 
                     victim.prefab == "warg" or 
                     victim.prefab == "spat" )
                     then
                     giveexpbean2(inst)
                end
                if victim and ( victim.prefab == "beefalo"  or
                     victim.prefab == "lightninggoat" or
                     victim.prefab == "pigman" or 
                     victim.prefab == "pigguard" or 
                     victim.prefab == "bunnyman" or 
                     victim.prefab == "merm" or 
                     victim.prefab == "walrus" or 
                     victim.prefab == "tallbird" or 
                     victim.prefab == "koalefant_summer" or 
                     victim.prefab == "koalefant_winter" or 
                     victim.prefab == "knight" or 
                     victim.prefab == "bishop" or 
                     victim.prefab == "rook" or 
                     victim.prefab == "crawlinghorror" or 
                     victim.prefab == "terrorbeak" or 
                     victim.prefab == "krampus" or 
                     victim.prefab == "tentacle" or 
                     victim.prefab == "knight" or
                     victim.prefab == "knight_nightmare" or 
                     victim.prefab == "bishop" or 
                     victim.prefab == "bishop_nightmare" or 
                     victim.prefab == "rook" or 
                     victim.prefab == "rook_nightmare" or  
                     victim.prefab == "worm" )
                     then
                     giveexpbean1(inst)
                end
            end



    end)
end


--预运行
function allachivevent_c:Init(inst)
    inst:DoTaskInTime(.1, function()

    self:eatfn(inst)

    self:onkilledother(inst)
    self:allget(inst)
    self:allgettwo(inst)
    end)

    inst.components.combat.damagemultiplier = inst.components.combat.damagemultiplier or 1
end

--检测是否完成所有成就
function allachivevent_c:allget(inst)

        inst:DoPeriodicTask(1, function()
            if self.a_a1 then
                if  self.a_tallbirdegg
                and self.a_frogglebunwich
                and self.a_baconeggs
                and self.a_bonestew
                and self.a_fishtacos
                and self.a_turkeydinner
                and self.a_fishsticks
                and self.a_meatballs
                and self.a_perogies
               -- and self.a_bisque
                --and self.a_surfnturf
                and self.a_tigershark
                and self.a_twister
                and self.a_snake
                and self.a_snake_poison
                and self.a_crocodog
                and self.a_poisoncrocodog
                and self.a_watercrocodog
                and self.a_coffee
                and self.a_a5
                and self.a_a6
                and self.a_a7
                and self.a_a8
                then       
                    inst.components.allachivevent.a_14 = true
                end
            else
                if  self.a_tallbirdegg
                and self.a_frogglebunwich
                and self.a_baconeggs
                and self.a_bonestew
                and self.a_fishtacos
                and self.a_turkeydinner
                and self.a_fishsticks
                and self.a_meatballs
                and self.a_perogies
                and self.a_a5
                and self.a_a6
                and self.a_a7
                and self.a_a8

                then
                    inst.components.allachivevent.a_14 = true
                end
            end
        end)
end


function allachivevent_c:allgettwo(inst)
    local allachivevent = inst.components.allachivevent

        inst:DoPeriodicTask(1, function()
            if self.a_a1 then
                if  allachivevent.a_15 then

                allachivevent.a_15=false
               self.a_tallbirdegg         = false
               self.a_frogglebunwich      = false
               self.a_baconeggs           = false
               self.a_bonestew            = false
               self.a_fishtacos           = false
               self.a_turkeydinner        = false
               self.a_fishsticks          = false
               self.a_meatballs           = false
               self.a_perogies            = false
              -- self.a_bisque              = false
              -- self.a_surfnturf           = false
               self.a_tigershark          = false
               self.a_twister             = false
               self.a_snake               = false
               self.a_snake_poison        = false
               self.a_crocodog            = false
               self.a_poisoncrocodog      = false
               self.a_watercrocodog       = false
               self.a_coffee              = false 
               self.a_a5                  = false
               self.a_a6                  = false
               self.a_a7                  = false
               self.a_a8                  = false


               self.a_tallbirdeggamount     =0
               self.a_frogglebunwichamount  =0
               self.a_baconeggsamount       =0
               self.a_bonestewamount        =0
               self.a_fishtacosamount       =0
               self.a_turkeydinneramount    =0
               self.a_fishsticksamount      =0
               self.a_meatballsamount       =0
               self.a_perogiesamount        =0
             --  self.a_bisqueamount          =0
             --  self.a_surfnturfamount       =0
               self.a_tigersharkamount      =0
               self.a_twisteramount         =0
               self.a_snakeamount           =0
               self.a_snake_poisonamount    =0
               self.a_crocodogamount        =0
               self.a_poisoncrocodogamount  =0
               self.a_watercrocodogamount   =0
               self.a_coffeeamount          =0
               self.a_a5amount              =0
               self.a_a6amount              =0
               self.a_a7amount              =0
               self.a_a8amount              =0

                end
            else
                if  allachivevent.a_15 then
                allachivevent.a_15=false
               self.a_tallbirdegg         = false
               self.a_frogglebunwich      = false
               self.a_baconeggs           = false
               self.a_bonestew            = false
               self.a_fishtacos           = false
               self.a_turkeydinner        = false
               self.a_fishsticks          = false
               self.a_meatballs           = false
               self.a_perogies            = false
               self.a_a5                  = false
               self.a_a6                  = false
               self.a_a7                  = false
               self.a_a8                  = false

               self.a_tallbirdeggamount     =0
               self.a_frogglebunwichamount  =0
               self.a_baconeggsamount       =0
               self.a_bonestewamount        =0
               self.a_fishtacosamount       =0
               self.a_turkeydinneramount    =0
               self.a_fishsticksamount      =0
               self.a_meatballsamount       =0
               self.a_perogiesamount        =0
               self.a_a5amount              =0
               self.a_a6amount              =0
               self.a_a7amount              =0
               self.a_a8amount              =0

                end 
            end
        end)
end
return allachivevent_c